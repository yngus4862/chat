<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="Chat.Client.Pages.ChatPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <Grid RowDefinitions="Auto,*,Auto" Padding="12" RowSpacing="10">
        <Label Text="{Binding Title}" FontSize="18" FontAttributes="Bold"/>

        <CollectionView Grid.Row="1" ItemsSource="{Binding Messages}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <VerticalStackLayout Padding="6">
                        <Label Text="{Binding Sender}" FontAttributes="Bold"/>
                        <Label Text="{Binding Content}" />
                        <Label Text="{Binding CreatedAt}" FontSize="10" Opacity="0.6"/>
                    </VerticalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <HorizontalStackLayout Grid.Row="2" Spacing="8">
            <Entry Placeholder="Type message..."
                   Text="{Binding Draft, Mode=TwoWay}"
                   HorizontalOptions="FillAndExpand"/>
            <Button Text="Send" Command="{Binding SendCommand}"/>
        </HorizontalStackLayout>
    </Grid>
</ContentPage>